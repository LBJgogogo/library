<!DOCTYPE html>


<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>注册</title>
    <link rel="stylesheet" href="../Bootstrap/css/bootstrap.min.css">
    <script src="../Bootstrap/js/jquery.js"></script>
    <script src="../Bootstrap/js/bootstrap.js"></script>
    <script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js"></script>
    <!-- 引入 vue -->
    <script type="text/javascript" src="../js/vue.js"></script>
    <!--引入 axios-->
    <script type="text/javascript" src="../js/axios.js"></script>
    <!--自定义 css 样式 -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="shortcut icon" type="image/x-icon" href="../images/logo.ico" rel="external nofollow"
        rel="external nofollow">
</head>

<body background="../images/1.gif" style="background-repeat:no-repeat;
background-attachment:fixed;
background-size:65% 100%; ">
<!--Bootstrap 导航条-->
<nav class="navbar navbar-default position">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#"><img alt="Brand" src="../images/logo.png" style="height: 50px;"></a>
        </div>
        <img alt="Brand" src="../images/main.png" style="height: 40px; margin-top: 20px;">
        <ul class="nav navbar-nav" style="float: right;">
            <li><a href="../index.html"><button type="button" class="btn btn-success">返回</button></a></li>
        </ul>
    </div>
</nav>
    <div id="app" class="modal-dialog" style="position:absolute;margin-left:65%;max-width: 31% ;">
        <div class="alert alert-success" v-show="tip" role="alert">{{msg}}</div>
        <div class="modal-content">
            <div class="modal-header">

                <h4 class="modal-title text-center" id="myModalLabel">账户注册</h4>
            </div>
            <div class="modal-body" id="model-body" style="margin-left: 50px;">
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-user" id="basic-addon1"></span>
                    <input type="text" class="form-control" placeholder="用户名(必填)" autocomplete="off"
                        v-model="user.username">
                </div><br />
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-lock" id="basic-addon1"></span>
                    <input type="password" class="form-control" placeholder="密码(必填)" autocomplete="off"
                        v-model="user.password">
                </div><br />
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-home" id="basic-addon1"></span>
                    <input type="text" class="form-control" placeholder="区块链账户地址(必填)" autocomplete="off"
                        v-model="user.chainAccount">
                </div><br />
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-pencil" id="basic-addon1"></span>
                    <input type="text" class="form-control" placeholder="姓名(必填)" autocomplete="off" v-model="user.name">
                </div><br />
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-list-alt" id="basic-addon1"></span>
                    <input type="text" class="form-control" placeholder="身份证号码(必填)" autocomplete="off"
                        v-model="user.cardId">
                </div><br />
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-phone" id="basic-addon1"></span>
                    <input type="text" class="form-control" placeholder="电话号码(必填)" autocomplete="off"
                        v-model="user.phone">
                </div><br />
                <div class="input-group" style="width:80%">
                    <span class="input-group-addon glyphicon glyphicon-envelope" id="basic-addon1"></span>
                    <input type="email" class="form-control" placeholder="邮箱地址" autocomplete="off" v-model="user.email">
                </div>
            </div>

            <div class="modal-footer" style="margin-left: 150px;">
                <div class="form-group" style="width:50%">
                    <button type="button" class="btn btn-success form-control" @click="submit">确定</button>
                </div>

            </div>

            <label class="checkbox-label" style="margin-left:20%">
                <input type="checkbox" v-model="user.check" true-value="true">
                <span class="checkmark"></span>
                <a class="btn-link" href="cluse.html"
                    style="text-decoration:none;font-size: 14px;color: #0a0a0a;border-color: snow;">阅读并接受《服务条款》和《隐私政策》</a>
            </label>

            <p class="text-center">已经有账号了？<a href="login.html">立刻登录</a></p>

        </div><!-- /.modal-content -->
    </div><!-- /.modal -->

    <script>
        //创建Vue实例
        new Vue({
            el: '#app', //el用于指定当前Vue实例为哪个容器服务，值通常为css选择器字符串
            data: { //data中用于存储数据，数据供el所指定的容器去使用，值我们暂时先写成一个对象。
                user: {
                    username: "",
                    password: "",
                    chainAccount: "",
                    name: "",
                    cardId: "",
                    phone: "",
                    email: "",
                    check: false
                },
                value: "",
                tip: false,
                msg: ""
            },
            mounted() {
                this.value = location.search;
                console.log(this.value);
                if (this.value !== "") {
                    if (!this.user.check) {
                    
                        this.user.check = true;
                    

                    }
                }
            },
            methods: {
                submit() {
                    if (this.user.username == '') {
                        alert("用户名不能为空")
                        return
                    }
                    if (this.user.password == '') {
                        alert("密码不能为空")
                        return
                    }
                    if (this.user.chainAccount == '') {
                        alert("区块链账户地址不能为空")
                        return
                    }
                    if (this.user.name == '') {
                        alert("姓名不能为空")
                        return
                    }
                    if (this.user.cardId == '') {
                        alert("身份证号码不能为空")
                        return
                    }
                    if (this.user.phone == '') {
                        alert("电话号码不能为空")
                        return
                    }
                   
                    if (!this.user.check) {
                        alert("请勾选服务条款")
                        return
                    }
                    axios.post("http://localhost:8080/user/register", this.user).then(response => {
                        if (response.status == 200) {
                            this.msg = "注册成功"
                            this.tip = true
                            setTimeout(() => {
                                //跳转页面
                                window.location.href = "login.html";
                            }, 1000)
                        } 
                    }).catch(error => {
                        alert("注册失败")

                });
                }
            }
        })
    </script>
</body>

</html>